{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./CSS/Requests.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Request=()=>{const handleDelete=async id=>{console.log('Request with the ID '+id+' is now archived');try{// Update the local state optimistically\nsetRequests(prevRequests=>prevRequests.filter(request=>request.id!==id));// Send the delete request to the server\nawait axios.delete(\"http://localhost:8080/requests?id=\".concat(id));console.log('Request deleted successfully');}catch(error){// If there's an error, revert the local state\nconsole.error('Could not delete data error: ',error);fetchData();// Fetch the latest data from the server to revert the local state\n}};const[requests,setRequests]=useState([]);const fetchData=async()=>{try{const response=await axios.get('http://localhost:8080/requests');setRequests(response.data);}catch(error){console.error('Error fetching requests:',error);}};useEffect(()=>{fetchData();},[]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(\"h1\",{children:\"Support Dashboard\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Query\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:requests.map(request=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:request.id}),/*#__PURE__*/_jsx(\"td\",{children:request.firstName}),/*#__PURE__*/_jsx(\"td\",{children:request.lastName}),/*#__PURE__*/_jsx(\"td\",{children:request.email}),/*#__PURE__*/_jsx(\"td\",{children:request.title}),/*#__PURE__*/_jsx(\"td\",{children:request.query}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(request.id),children:\"Delete\"}),\" \"]})]},request.id))})]})})]});};export default Request;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Request","handleDelete","id","console","log","setRequests","prevRequests","filter","request","delete","concat","error","fetchData","requests","response","get","data","children","className","map","firstName","lastName","email","title","query","onClick"],"sources":["C:/Users/Aryan/Documents/GitHub/cs2001-2023-24-group04/cropshop-front-end/src/Requests.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './CSS/Requests.css';\r\n\r\nconst Request = () => {\r\n\r\n  const handleDelete = async (id) => {\r\n    console.log('Request with the ID ' + id + ' is now archived');\r\n    try {\r\n      // Update the local state optimistically\r\n      setRequests(prevRequests => prevRequests.filter(request => request.id !== id));\r\n  \r\n      // Send the delete request to the server\r\n      await axios.delete(`http://localhost:8080/requests?id=${id}`);\r\n      \r\n      console.log('Request deleted successfully');\r\n    } catch (error) {\r\n      // If there's an error, revert the local state\r\n      console.error('Could not delete data error: ', error);\r\n      fetchData(); // Fetch the latest data from the server to revert the local state\r\n    }\r\n  }\r\n  \r\n  \r\n\r\n\r\n  const [requests, setRequests] = useState([]);\r\n\r\n \r\n    const fetchData = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:8080/requests');\r\n        setRequests(response.data);\r\n      } catch (error) {\r\n        console.error('Error fetching requests:', error);\r\n      }\r\n    };\r\n\r\n\r\n useEffect(() => {\r\n    fetchData();\r\n  },[]); \r\n\r\n\r\n  \r\n  return (\r\n    <div>\r\n      <header>\r\n        <h1>Support Dashboard</h1>\r\n      </header>\r\n      <div className=\"dashboard\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>First Name</th>\r\n              <th>Last Name</th>\r\n              <th>Email</th>\r\n              <th>Title</th>\r\n              <th>Query</th>\r\n              <th>Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {requests.map(request => (\r\n              <tr key={request.id}>\r\n                <td>{request.id}</td>\r\n                <td>{request.firstName}</td>\r\n                <td>{request.lastName}</td>\r\n                <td>{request.email}</td>\r\n                <td>{request.title}</td>\r\n                <td>{request.query}</td>\r\n                <td>\r\n                  <button onClick={() => handleDelete(request.id)}>Delete</button> {/* THis has some latency for some reason I need help figuring it out. */}\r\n                </td> \r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Request;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}